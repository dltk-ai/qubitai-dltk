

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>About &mdash; Qubitai-dltk v1.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/tabs.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About" href="../natural_language_processing/index.html" />
    <link rel="prev" title="Clustering" href="../machine_learning/clustering.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Qubitai-dltk
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">About DLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html#opendltk-and-python-sdk-client">OpenDLTK and Python SDK client</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/openDLTK_setup.html">Setting Up OpenDLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/openDLTK_single_instance.html">OpenDLTK on single machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/openDLTK_multiple_instance.html">OpenDLTK on multiple machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/pythonClientSDK.html">DLTK Python SDK Client Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/toggle_auth.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/generateAPIkey.html">Create user and Generate APIkey</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/ansibleHostConfig.html">Configure Ansible Hosts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/configurations.html">Configurations</a></li>
</ul>
<p class="caption"><span class="caption-text">Machine Learning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html#uploading-a-dataset">Uploading a Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html#check-job-status">Check Job Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html#check-job-output">Check Job Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/index.html#downloading-a-file">Downloading a File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/data_preprocessing.html">Data Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/classification.html">Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/regression.html">Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning/clustering.html">Clustering</a></li>
</ul>
<p class="caption"><span class="caption-text">Computer Vision</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="#image-classification">Image Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="#object-detection">Object Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="#face-detection">Face Detection</a></li>
</ul>
<p class="caption"><span class="caption-text">NLP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../natural_language_processing/index.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../natural_language_processing/index.html#sentiment-analysis">Sentiment Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../natural_language_processing/index.html#parts-of-speech-tagger">Parts of Speech Tagger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../natural_language_processing/index.html#named-entity-recognition">Named Entity Recognition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../natural_language_processing/index.html#dependancy-parser">Dependancy Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../natural_language_processing/index.html#tags-recognition">Tags Recognition</a></li>
</ul>
<p class="caption"><span class="caption-text">History</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../history/index.html">History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Qubitai-dltk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>About</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/computer_vision/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about">
<h1>About<a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h1>
<p>DLTK’s Computer Vision service includes advanced image processing algorithms which return required information from the given image. We also have third party APIs like IBM &amp; Azure integrated.</p>
</div>
<div class="section" id="image-classification">
<h1>Image Classification<a class="headerlink" href="#image-classification" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Image Classification is a fundamental computer vision task which attempts to comprehend an entire image as a whole.
It tries to classify an image into various classes the model is trained for.</p>
<p>This feature uses various open source models present which are included in OpenDLTK for classifying an image based on its visual content.
Also other proprietary AI engines like Azure and IBM can also be used using same function, as shown in below code.</p>
<p><em>Supported Open Source Models</em></p>
<blockquote>
<div><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Implementations</p></th>
<th class="head"><p>Classes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ResNet50</p></td>
<td><p><a class="reference external" href="http://www.image-net.org/">ImageNet</a></p></td>
<td><p><a class="reference external" href="https://storage.googleapis.com/download.tensorflow.org/data/imagenet_class_index.json">ImageNet Class Index</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><em>Supported Third Party Classifiers</em></p>
<blockquote>
<div><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Documentation Link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Azure</p></td>
<td><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/concept-tagging-images">Azure Image tagging</a></p></td>
</tr>
<tr class="row-odd"><td><p>IBM</p></td>
<td><p><a class="reference external" href="https://cloud.ibm.com/apidocs/visual-recognition/visual-recognition-v3?code=python#getclassify">IBM Visual Recognition</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="py function">
<dt>
<code class="sig-name descname">client.image_classification(image_url=None, image_path=None, top_n=3, image_classifiers=['tensorflow'], output_types=[&quot;json&quot;]):</code></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_url</strong> – Image URL</p></li>
<li><p><strong>image_path</strong> – Local Image Path</p></li>
<li><p><strong>top_n</strong> – get top n predictions</p></li>
<li><p><strong>image_classifiers</strong> – Supported image classifier tensorflow, azure, ibm</p></li>
<li><p><strong>output_types</strong> (<em>list</em>) – Type of output requested by client: “json”, “image”</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Image classification response</p>
</dd>
</dl>
</dd></dl>

<p><strong>Example</strong></p>
<blockquote>
<div><ol class="loweralpha">
<li><dl>
<dt>Setup DLTK</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dltk_ai</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">dltk_ai</span><span class="o">.</span><span class="n">DltkAiClient</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;http://localhost:8000&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Send Image to OpenDLTK for Image classification</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;../image_classification_sample.jpg&quot;</span>

<span class="n">image_classification</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">image_classification</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">image_classifiers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tensorflow&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Check status of prediction</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">image_classification_output</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">check_cv_job</span><span class="p">(</span><span class="n">image_classification</span><span class="p">[</span><span class="s1">&#39;task_id&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">image_classification_output</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
<p><strong>Input and output</strong></p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/image_classification_sample_2.jpg"><img alt="sample-classification-image" class="align-left" src="../_images/image_classification_sample_2.jpg" style="height: 140px;" /></a>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;task_status&quot;</span><span class="p">:</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
 <span class="nt">&quot;task_id&quot;</span><span class="p">:</span> <span class="s2">&quot;83efafb7-95ae-42cf-871d-58f7b21a37be&quot;</span><span class="p">,</span>
 <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;tensorflow_predicted_classes&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;clumber&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.23649043&quot;</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;otterhound&quot;</span><span class="p">,</span> <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.18737608&quot;</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;Old_English_sheepdog&quot;</span><span class="p">,</span> <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.12396963&quot;</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;Irish_wolfhound&quot;</span><span class="p">,</span> <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="s2">&quot;0.10178323&quot;</span><span class="p">}]}}</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="object-detection">
<h1>Object Detection<a class="headerlink" href="#object-detection" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Object Detection identifies and locates objects in an image provided by user. This function uses open source deep learning pre-trained models provided under OpenDLTK,
along with support for proprietary models by AI engines like Azure.</p>
<p>Object Detection can be used for various use-cases like Tracking objects, Counting people, Vehicle Detection, etc.</p>
<p><em>Supported Open Source Models</em></p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Feature Extractor</p></th>
<th class="head"><p>Data Trained on</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Single Shot Detector</p></td>
<td><p>ResNet50</p></td>
<td><p><a class="reference external" href="https://cocodataset.org/#explore">COCO Dataset</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><em>Supported Object Detectors</em></p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Documentation Link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Azure</p></td>
<td><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/concept-object-detection">Azure Object Detection Documentation</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="py function">
<dt>
<code class="sig-name descname">client.object_detection(image_url=None, image_path=None,object_detectors=['tensorflow'], output_types=[&quot;json&quot;]):</code></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_url</strong> – Image URL</p></li>
<li><p><strong>image_path</strong> – Local Image Path</p></li>
<li><p><strong>object_detectors</strong> – list of object detectors, Supported object detectors are [‘tensorflow’,’azure’]</p></li>
<li><p><strong>output_types</strong> (<em>list</em>) – Type of output requested by client: “json”, “image” (base64 encoded image)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>A json object containing the output of object detection</p>
</dd>
</dl>
</dd></dl>

<p><strong>Example</strong></p>
<blockquote>
<div><ol class="loweralpha">
<li><p>Initialize DLTK Client</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dltk_ai</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">dltk_ai</span><span class="o">.</span><span class="n">DltkAiClient</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;apikey&quot;</span> <span class="p">,</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;http://localhost:8000&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Send Request to OpenDLTK for processing</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image_path</span> <span class="o">=</span> <span class="s2">&quot;./examples/data/image/object_detection_sample_2.jpg&quot;</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img_path</span><span class="p">)</span>

<span class="n">object_detection_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">object_detection</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">image_path</span><span class="p">,</span> <span class="n">object_detectors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;azure&#39;</span><span class="p">,</span> <span class="s1">&#39;tensorflow&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">object_detection_response</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Check prediction status</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">object_detection_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">check_cv_job</span><span class="p">(</span><span class="n">object_detection_response</span><span class="p">[</span><span class="s1">&#39;task_id&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">object_detection_response</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Expected Response</em></p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;task_status&quot;</span><span class="p">:</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
 <span class="nt">&quot;task_id&quot;</span><span class="p">:</span> <span class="s2">&quot;8b32db78-708d-49ff-83ad-71dedee5c1f5&quot;</span><span class="p">,</span>
<span class="hll"> <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;azure_detected_objects&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">1249</span><span class="p">,</span>
</span>     <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">709</span><span class="p">,</span>
     <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">1399</span><span class="p">,</span>
     <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">890</span><span class="p">},</span>
    <span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;vase&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.657</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">1190</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">1450</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">854</span><span class="p">},</span>
    <span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;plant&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.776</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">327</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">820</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">556</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1198</span><span class="p">},</span>
    <span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.886</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">1486</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">771</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">1737</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1162</span><span class="p">},</span>
    <span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.843</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">948</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">428</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1310</span><span class="p">},</span>
    <span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.659</span><span class="p">},</span>
   <span class="p">{</span><span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">1685</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">910</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">2013</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1260</span><span class="p">},</span>
    <span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.74</span><span class="p">}],</span>
<span class="hll">  <span class="nt">&quot;tensorflow_detected_objects&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;vase&quot;</span><span class="p">,</span>
</span>    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.6711814403533936</span><span class="p">,</span>
    <span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">702</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">1019</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">830</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1172</span><span class="p">}},</span>
   <span class="p">{</span><span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.6634005308151245</span><span class="p">,</span>
    <span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">1500</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">774</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">1748</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1144</span><span class="p">}},</span>
   <span class="p">{</span><span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.6156675219535828</span><span class="p">,</span>
    <span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">319</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">792</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">566</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1156</span><span class="p">}},</span>
   <span class="p">{</span><span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;chair&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.5750893950462341</span><span class="p">,</span>
    <span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">929</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">489</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">1334</span><span class="p">}},</span>
   <span class="p">{</span><span class="nt">&quot;object_name&quot;</span><span class="p">:</span> <span class="s2">&quot;vase&quot;</span><span class="p">,</span>
    <span class="nt">&quot;confidence&quot;</span><span class="p">:</span> <span class="mf">0.5276069641113281</span><span class="p">,</span>
    <span class="nt">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;x1&quot;</span><span class="p">:</span> <span class="mi">1240</span><span class="p">,</span> <span class="nt">&quot;y1&quot;</span><span class="p">:</span> <span class="mi">710</span><span class="p">,</span> <span class="nt">&quot;x2&quot;</span><span class="p">:</span> <span class="mi">1398</span><span class="p">,</span> <span class="nt">&quot;y2&quot;</span><span class="p">:</span> <span class="mi">889</span><span class="p">}}]}}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Visualize output</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dltk_ai.visualization</span> <span class="kn">import</span> <span class="n">draw_bbox</span>

<span class="n">tensforflow_output</span> <span class="o">=</span> <span class="n">object_detection_response</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">][</span><span class="s1">&#39;tensorflow_detected_objects&#39;</span><span class="p">]</span>
<span class="n">bboxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">object_</span><span class="p">[</span><span class="s1">&#39;bbox&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">object_</span> <span class="ow">in</span> <span class="n">tensforflow_output</span><span class="p">]</span>
<span class="n">captions</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">object_</span><span class="p">[</span><span class="s2">&quot;object_name&quot;</span><span class="p">]</span> <span class="si">}</span><span class="s1">   </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">object_</span><span class="p">[</span><span class="s2">&quot;confidence&quot;</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="si">}</span><span class="s1">%&#39;</span>  <span class="k">for</span> <span class="n">object_</span> <span class="ow">in</span> <span class="n">tensforflow_output</span><span class="p">]</span>

<span class="n">draw_bbox</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">bboxes</span><span class="p">,</span> <span class="n">captions</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Run in Jupyter Notebook for better visualization of response</p>
</div>
<a class="reference internal image-reference" href="../_images/house_object_detection_output.jpg"><img alt="sample-object-image" src="../_images/house_object_detection_output.jpg" style="height: 400px;" /></a>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="face-detection">
<h1>Face Detection<a class="headerlink" href="#face-detection" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Face Detection is fundamental task for various use-cases like Face Recognition, Face Verification, Expression Analysis, etc.</p>
<p>This function uses open-source models for face detection, along with support for various proprietary AI engines like Azure</p>
<p><em>Supported Open Source Models</em></p>
<blockquote>
<div><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Implementations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MTCNN</p></td>
<td><p><a class="reference external" href="https://github.com/ipazc/mtcnn">MTCNN GitHub Implementation</a></p></td>
</tr>
<tr class="row-odd"><td><p>DLIB-HoG</p></td>
<td><p><a class="reference external" href="http://dlib.net/python/index.html#dlib.get_frontal_face_detector">Dlib Detector</a></p></td>
</tr>
<tr class="row-even"><td><p>OpenCV - DNN</p></td>
<td><p><a class="reference external" href="https://github.com/opencv/opencv/tree/master/samples/dnn/face_detector">Opencv DNN Github Implementation</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><em>Supported Third Party Classifiers</em></p>
<blockquote>
<div><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Documentation Link</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Azure</p></td>
<td><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/cognitive-services/face/concepts/face-detection">Azure Face Detection Documentation</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="py function">
<dt>
<code class="sig-name descname">client.face_analytics(image_url=None, features=None, image_path=None, face_detectors=['mtcnn'], ,output_types=[&quot;json&quot;]):</code></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_url</strong> – Image URL</p></li>
<li><p><strong>features</strong> – Type of features requested by client. Presently supports “face_detection”.</p></li>
<li><p><strong>image_path</strong> – Local Image Path</p></li>
<li><p><strong>face_detectors</strong> – supported face detectors are (mtcnn, dlib, opencv, azure)</p></li>
<li><p><strong>output_types</strong> (<em>list</em>) – Type of output requested by client: “json”, “image”</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>A json object containing the output of object detection</p>
</dd>
</dl>
</dd></dl>

<p><strong>Example</strong></p>
<blockquote>
<div><ol class="loweralpha">
<li><dl>
<dt>Import necessary packages</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">dltk_ai</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">dltk_ai</span><span class="o">.</span><span class="n">DltkAiClient</span><span class="p">(</span><span class="n">base_url</span><span class="o">=</span><span class="s1">&#39;http://localhost:8000&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Send request to OpenDLTK for processing image</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">img_path</span> <span class="o">=</span> <span class="s2">&quot;./examples/data/image/face_analytics_sample_1.jpg&quot;</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img_path</span><span class="p">)</span>

<span class="n">face_analytics_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">face_analytics</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="n">img_path</span><span class="p">,</span> <span class="n">azure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">face_analytics_response</span><span class="p">)</span>
</pre></div>
</div>
<p>Ensure azure credentials were used while setting up OpenDLTK, else you can use <code class="docutils literal notranslate"><span class="pre">mtcnn</span></code></p>
<p><em>Expected Output</em></p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;task_status&quot;</span><span class="p">:</span> <span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
 <span class="nt">&quot;task_id&quot;</span><span class="p">:</span> <span class="s2">&quot;30e2bddd-5468-49b0-9f49-d7fb74b6663b&quot;</span><span class="p">,</span>
 <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;azure&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;json&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;face_locations&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">514</span><span class="p">,</span>
      <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">421</span><span class="p">,</span>
      <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span>
      <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">46</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">645</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">408</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">265</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">382</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">45</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">1217</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">417</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">44</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">985</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">374</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">43</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">1311</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">369</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">43</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">393</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">432</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">1088</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">409</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">875</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">374</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">},</span>
     <span class="p">{</span><span class="nt">&quot;x&quot;</span><span class="p">:</span> <span class="mi">744</span><span class="p">,</span> <span class="nt">&quot;y&quot;</span><span class="p">:</span> <span class="mi">424</span><span class="p">,</span> <span class="nt">&quot;w&quot;</span><span class="p">:</span> <span class="mi">39</span><span class="p">,</span> <span class="nt">&quot;h&quot;</span><span class="p">:</span> <span class="mi">39</span><span class="p">}]}}}}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
<p><strong>c. Visualize response</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">azure_bboxes</span> <span class="o">=</span>  <span class="n">face_analytics_response</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">][</span><span class="s1">&#39;azure&#39;</span><span class="p">][</span><span class="s1">&#39;json&#39;</span><span class="p">][</span><span class="s1">&#39;face_locations&#39;</span><span class="p">]</span>
<span class="n">azure_bboxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">box</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">box</span> <span class="ow">in</span> <span class="n">azure_bboxes</span><span class="p">]</span>

<span class="n">output_image</span> <span class="o">=</span> <span class="n">draw_bbox</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">azure_bboxes</span><span class="p">,</span><span class="n">coords_order</span><span class="o">=</span><span class="s1">&#39;xywh&#39;</span><span class="p">)</span>
<span class="n">output_image</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/face_detection_output.jpg"><img alt="sample-face-image" src="../_images/face_detection_output.jpg" style="height: 350px;" /></a>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Update <code class="docutils literal notranslate"><span class="pre">base_url=&quot;http://localhost:8000&quot;</span></code> with your base service IP address.
and in case <code class="docutils literal notranslate"><span class="pre">authentication</span></code> is enabled, please refer <a class="reference internal" href="../getting_started/pythonClientSDK.html#client-sdk-usage-with-auth"><span class="std std-ref">client SDK usage with authentication enabled</span></a> section</p>
</div>
</div></blockquote>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../natural_language_processing/index.html" class="btn btn-neutral float-right" title="About" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../machine_learning/clustering.html" class="btn btn-neutral float-left" title="Clustering" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, QubitAI.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>